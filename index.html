<!DOCTYPE html>
<html lang="en-us">
  <head>

    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Dota Data</title>

    <meta name="author" content="David Herszenhaut">
    <meta name="description" content="Visualizations of my Dota 2 Matchmaking Rating (MMR) and other statistics using the D3 JavaScript framework.">
    <meta name="keywords" content="d3, javascript, dota, data, visualization">

    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">

    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

  </head>
  <body>

    <div id="container">

      <header>
        <div id="headings">
          <h1>Dota Data</h1>
          <h2>Dota 2 Ranked Matchmaking Visualizations</h2>
        </div>
      </header>

      <div id="graphs">
        <svg width="960" height="540" id="party-mmr"></svg>
        <svg width="960" height="540" id="solo-mmr"></svg>
      </div>

      <footer>
        <h2>David Herszenhaut &copy; 2018</h2>
      </footer>

    </div>

    <script src="https://d3js.org/d3.v5.min.js"></script>

    <script>

      d3.csv("data/party.csv").then(function(data) {

        console.log(data);
        var padding = {t: 50, r: 50, b: 50, l: 80};

        var partyMMR = d3.select("#party-mmr");
        var width = +partyMMR.attr("width") - padding.l - padding.r;
        var height = +partyMMR.attr("height") - padding.t - padding.b;
        var group = partyMMR.append("g")
          .attr("transform", "translate(" + padding.l + ", " + padding.t + ")");
        var xScale = d3.scaleLinear()
          .domain(d3.extent([0, data.length]))
          .range([0, width]);
        var xAxis = d3.axisBottom(xScale);
        group.append("g")
          .attr("transform", "translate(0, " + height + ")")
          .call(xAxis)
          .append("text")
          .attr("fill", "#000000")
          .attr("font-size", "18px")
          .attr("transform", "translate(" + [width / 2, 40] + ")")
          .text("Time");
        var yScale = d3.scaleLinear()
          .domain([0, d3.max(data, function(d) { return d.MMR; })])
          .domain(d3.extent(data, function(d) { return d.MMR; }))
          .range([height, 0]);
        var yAxis = d3.axisLeft(yScale);
        group.append("g")
          .call(yAxis)
          .append("text")
          .attr("fill", "#000000")
          .attr("font-size", "18px")
          .attr("transform", "translate(" + [-50, height / 2] + ") rotate(-90)")
          .text("MMR");
        var line = d3.line()
          .x(function(d, i) { return xScale(i); })
          .y(function(d) { return yScale(d.MMR); });
        group.append("path")
          .datum(data)
          .attr("fill", "none")
          .attr("stroke", "steelblue")
          .attr("stroke-linejoin", "round")
          .attr("stroke-linecap", "round")
          .attr("stroke-width", 1.5)
          .attr("d", line);
        group.append("text")
          .attr("fill", "#000000")
          .attr("font-size", "24px")
          .attr("transform", "translate(" + [width / 2 - padding.r - padding.l, -20] + ")")
          .text("Party MMR Over Time");

      });

    </script>

  </body>
</html>