<!DOCTYPE html>
<html lang="en-us">
  <head>

    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Dota Data</title>

    <meta name="author" content="David Herszenhaut">
    <meta name="description" content="Visualizations of my Dota 2 Matchmaking Rating (MMR) and other statistics using the D3 JavaScript framework.">
    <meta name="keywords" content="d3, javascript, dota, data, visualization">

    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">

    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed" rel="stylesheet">

    <!--

    TODO

    - fix graphs
    - fix color schemes
    - continue writing paragraphs
    - underline anchor tag animation
    - look over axis tick readability
    - create hover tooltip for bar charts
    - research how to make responsive svg
    - create floating scroll back to top button
    - create "Party/Solo Games Per Day" histogram
    - move repeated .attr and .style calls to css
    - add hero icon on bar graph hover (dota api?)
    - create toggle switch for party and solo views
    - experiment with average lines for line graphs
    - look at replacing spacer math with padding calls
    - look over axis values (whole numbers for matches)
    - create hover tooltip for pie charts (corner of graph)
    - add option to reorder bar graph by value/alphabetically
    - fix spacing of "Party MMR Change Over Time" x axis label
    - write function for smooth scroll to section from table of contents
    - create hover tooltip for line graphs (line to x axis, circle over point)
    - use span tags in paragraphs to discuss broader statistics (win-loss ratio)
    - standardize order of d3 code (xAxis/yAxis together, similar axis creation calls, translate with array)
    
    -->

  </head>
  <body>

    <div id="container">

      <header>
        <div id="title">
          <h1>Dota Data</h1>
        </div>
        <div id="subtitle">
          <h2> Dota 2 Ranked Matchmaking Data Visualizations</h2>
        </div>
        <div id="contents">
          <h3>Contents</h3>
          <ul>
            <li><a href="#introduction">Introduction</a></li>
            <li><a href="#overview">Overview</a></li>
            <li><a href="#mmr-graphs">Changes Over Time</a></li>
            <li><a href="#hero-role-graphs">Hero and Role Statistics</a></li>
        </div>
      </header>

      <div id="introduction">
        <h4 class="section-header">Introduction</h4>
        <p>Dota 2 is a multiplayer online battle arena video game which pits two teams of five against each other in a battle to destroy the other team's base.</p>
      </div>

      <div id="overview">
        <h4 class="section-header">Overview</h4>
        <p>The following data visualizations were created using the D3.js JavaScript framework and are meant to showcase ... </p>
      </div>

      <div id="mmr-graphs">
        <h4 class="section-header">Changes Over Time</h4>
        <p>Dota 2 tracks each player's skill progression using their Matchmaking Ranking (MMR). This value is separate for solo queue and party queue games and is updated after every ranked match. You can use the dropdown menu in the bottom left to switch between solo queue and party queue visualizations.</p>
        <svg class="party" id="party-mmr"></svg>
        <svg class="party" id="party-mmr-change"></svg>
        <svg class="party" id="party-mmr-absolute-change"></svg>
        <svg class="solo" id="solo-mmr"></svg>
        <svg class="solo" id="solo-mmr-change"></svg>
        <svg class="solo" id="solo-mmr-absolute-change"></svg>
      </div>

      <div id="hero-role-graphs">
        <h4 class="section-header">Hero and Role Statistics</h4>
        <p>There are currently over 110 heroes in Dota 2. In each game, each player must pick a unique hero to control. Each of the five players is given a position or role for the game. In general, these roles are: Carry (1), Mid (2), Offlane (3), Roam (4), and Support (5). The position number determines which character gets priority for resources like gold and experience. The lower the number, the higher the priority.</p>
        <svg class="party" id="party-roles"></svg>
        <svg class="party" id="party-heroes-pie"></svg>
        <svg class="party" id="party-heroes-bar"></svg>
        <svg class="solo" id="solo-roles"></svg>
        <svg class="solo" id="solo-heroes-pie"></svg>
        <svg class="solo" id="solo-heroes-bar"></svg>
      </div>

      <footer>
        <h2>David Herszenhaut &copy; 2018</h2>
      </footer>

    </div>

    <script src="https://d3js.org/d3.v5.min.js"></script>

    <script type="text/javascript" src="js/main.js"></script>

    <script>

      var spacer = window.innerWidth * 0.05;
      var padding = {t: spacer * 2, r: spacer * 2, b: spacer * 2, l: spacer * 3};

      d3.csv("data/party.csv").then(function(data) {

        // PARTY-MMR
        var svg = d3.select("#party-mmr");
        svg.attr("width", window.innerWidth * 0.9);
        svg.attr("height", window.innerWidth * 0.5);
        var width = svg.attr("width") - padding.l - padding.r;
        var height = svg.attr("height") - padding.t - padding.b;
        var group = svg.append("g")
          .attr("transform", "translate(" + [padding.l, padding.t] + ")");
        var xScale = d3.scaleLinear()
          .domain([0, data.length])
          .range([0, width]);
        var xAxis = d3.axisBottom(xScale);
        group.append("g")
          .attr("transform", "translate(" + [0, height] + ")")
          .call(xAxis)
          .append("text")
          .attr("fill", "#000000")
          .attr("text-anchor", "middle")
          .attr("transform", "translate(" + [width / 2, spacer * 1.75] + ")")
          .text("Matches");
        var yScale = d3.scaleLinear()
          .domain(d3.extent(data, function(d) { return d.MMR; }))
          .range([height, 0]);
        var yAxis = d3.axisLeft(yScale);
        group.append("g")
          .call(yAxis)
          .append("text")
          .attr("fill", "#000000")
          .attr("text-anchor", "middle")
          .attr("transform", "translate(" + [-spacer * 2.25, height / 2] + ") rotate(-90)")
          .text("MMR");
        var line = d3.line()
          .x(function(d, i) { return xScale(i); })
          .y(function(d) { return yScale(d.MMR); });
        group.append("path")
          .datum(data)
          .attr("fill", "none")
          .attr("stroke", "#000000")
          .attr("d", line);
        group.append("text")
          .attr("transform", "translate(" + [width / 2, -spacer] + ")")
          .attr("text-anchor", "middle")
          .text("Party MMR Over Time");

        // PARTY-MMR-CHANGE
        var svg = d3.select("#party-mmr-change");
        svg.attr("width", window.innerWidth * 0.9);
        svg.attr("height", window.innerWidth * 0.5);
        var width = svg.attr("width") - padding.l - padding.r;
        var height = svg.attr("height") - padding.t - padding.b;
        var group = svg.append("g")
          .attr("transform", "translate(" + [padding.l, padding.t] + ")");
        var xScale = d3.scaleLinear()
          .domain(d3.extent([0, data.length]))
          .range([0, width]);
        var xAxis = d3.axisBottom(xScale);
        var yScale = d3.scaleLinear()
          .domain(d3.extent(data, function(d) { return +d.Change; }))
          .range([height, 0]);
        var yAxis = d3.axisLeft(yScale);
        group.append("g")
          .attr("transform", "translate(" + [0, yScale(0)] + ")")
          .call(xAxis)
          .append("text")
          .attr("fill", "#000000")
          .attr("text-anchor", "middle")
          .attr("transform", "translate(" + [width / 2, spacer * 5] + ")")
          .text("Matches");
        group.append("g")
          .call(yAxis)
          .append("text")
          .attr("fill", "#000000")
          .attr("text-anchor", "middle")
          .attr("transform", "translate(" + [-spacer * 2.25, height / 2] + ") rotate(-90)")
          .text("MMR Change");
        var line = d3.line()
          .x(function(d, i) { return xScale(i); })
          .y(function(d) { return yScale(d.Change); });
        group.append("path")
          .datum(data)
          .attr("fill", "none")
          .attr("stroke", "#000000")
          .attr("d", line);
        group.append("text")
          .attr("fill", "#000000")
          .attr("transform", "translate(" + [width / 2, -spacer] + ")")
          .attr("text-anchor", "middle")
          .text("Party MMR Change Over Time");

        // PARTY-MMR-ABSOLUTE-CHANGE

        // PARTY-ROLES

        // PARTY-HEROES-PIE

        // PARTY-HEROES-BAR

      });

    </script>

    <!-- <script>

      // PARTY
      d3.csv("data/party.csv").then(function(data) {

        var padding = {t: 50, r: 50, b: 50, l: 80};

        // MMR OVER TIME
        var partyMMR = d3.select("#party-mmr")
        partyMMR.attr("width", window.innerWidth * .9);
        partyMMR.attr("height", window.innerHeight * .4);
        var width = +partyMMR.attr("width") - padding.l - padding.r;
        var height = +partyMMR.attr("height") - padding.t - padding.b;
        var group = partyMMR.append("g")
          .attr("transform", "translate(" + padding.l + ", " + padding.t + ")");
        var xScale = d3.scaleLinear()
          .domain(d3.extent([0, data.length]))
          .range([0, width]);
        var xAxis = d3.axisBottom(xScale);
        group.append("g")
          .attr("transform", "translate(0, " + height + ")")
          .call(xAxis)
          .append("text")
          .attr("fill", "#000000")
          .attr("font-size", "18px")
          .attr("transform", "translate(" + [width / 2, 40] + ")")
          .text("Matches");
        var yScale = d3.scaleLinear()
          .domain([0, d3.max(data, function(d) { return d.MMR; })])
          .domain(d3.extent(data, function(d) { return d.MMR; }))
          .range([height, 0]);
        var yAxis = d3.axisLeft(yScale);
        group.append("g")
          .call(yAxis)
          .append("text")
          .attr("fill", "#000000")
          .attr("font-size", "18px")
          .attr("transform", "translate(" + [-50, height / 2] + ") rotate(-90)")
          .attr("text-anchor", "middle")
          .text("MMR");
        var line = d3.line()
          .x(function(d, i) { return xScale(i); })
          .y(function(d) { return yScale(d.MMR); });
        group.append("path")
          .datum(data)
          .attr("fill", "none")
          .attr("stroke", "steelblue")
          .attr("stroke-linejoin", "round")
          .attr("stroke-linecap", "round")
          .attr("stroke-width", 1.5)
          .attr("d", line);
        group.append("text")
          .attr("fill", "#000000")
          .attr("font-size", "24px")
          .attr("transform", "translate(" + [width / 2, -20] + ")")
          .attr("text-anchor", "middle")
          .text("Party MMR Over Time");

        // MMR CHANGE OVER TIME
        var partyMMRChange = d3.select("#party-mmr-change")
        var width = +partyMMRChange.attr("width") - padding.l - padding.r;
        var height = +partyMMRChange.attr("height") - padding.t - padding.b;
        var group = partyMMRChange.append("g")
          .attr("transform", "translate(" + padding.l + ", " + padding.t + ")");
        var xScale = d3.scaleLinear()
          .domain(d3.extent([0, data.length]))
          .range([0, width]);
        var yScale = d3.scaleLinear()
          .domain(d3.extent(data, function(d) { return +d.Change; }))
          .range([height, 0]);
        var xAxis = d3.axisBottom(xScale);
        group.append("g")
          .attr("transform", "translate(0, " + yScale(0) + ")")
          .call(xAxis)
          .append("text")
          .attr("fill", "#000000")
          .attr("font-size", "18px")
          .attr("transform", "translate(" + [width / 2, height / 2 + 40] + ")")
          .text("Matches");
        var yAxis = d3.axisLeft(yScale);
        group.append("g")
          .call(yAxis)
          .append("text")
          .attr("fill", "#000000")
          .attr("font-size", "18px")
          .attr("transform", "translate(" + [-50, height / 2] + ") rotate(-90)")
          .attr("text-anchor", "middle")
          .text("MMR Change");
        var line = d3.line()
          .x(function(d, i) { return xScale(i); })
          .y(function(d) { return yScale(d.Change); });
        group.append("path")
          .datum(data)
          .attr("fill", "none")
          .attr("stroke", "steelblue")
          .attr("stroke-linejoin", "round")
          .attr("stroke-linecap", "round")
          .attr("stroke-width", 1.5)
          .attr("d", line);
        group.append("text")
          .attr("fill", "#000000")
          .attr("font-size", "24px")
          .attr("transform", "translate(" + [width / 2, -20] + ")")
          .attr("text-anchor", "middle")
          .text("Party MMR Change Over Time");

        // ABSOLUTE MMR CHANGE OVER TIME
        var partyMMRAbsChange = d3.select("#party-mmr-absolute-change")
        var width = +partyMMRAbsChange.attr("width") - padding.l - padding.r;
        var height = +partyMMRAbsChange.attr("height") - padding.t - padding.b;
        var group = partyMMRAbsChange.append("g")
          .attr("transform", "translate(" + padding.l + ", " + padding.t + ")");
        var xScale = d3.scaleLinear()
          .domain(d3.extent([0, data.length]))
          .range([0, width]);
        var xAxis = d3.axisBottom(xScale);
        group.append("g")
          .attr("transform", "translate(0, " + height + ")")
          .call(xAxis)
          .append("text")
          .attr("fill", "#000000")
          .attr("font-size", "18px")
          .attr("transform", "translate(" + [width / 2, 40] + ")")
          .text("Matches");
        var yScale = d3.scaleLinear()
          .domain([0, d3.max(data, function(d) { return Math.abs(d.Change); })])
          .range([height, 0]);
        var yAxis = d3.axisLeft(yScale);
        group.append("g")
          .call(yAxis)
          .append("text")
          .attr("fill", "#000000")
          .attr("font-size", "18px")
          .attr("transform", "translate(" + [-50, height / 2] + ") rotate(-90)")
          .attr("text-anchor", "middle")
          .text("Absolute MMR Change");
        var line = d3.line()
          .x(function(d, i) { return xScale(i); })
          .y(function(d) { return yScale(Math.abs(d.Change)); });
        group.append("path")
          .datum(data)
          .attr("fill", "none")
          .attr("stroke", "steelblue")
          .attr("stroke-linejoin", "round")
          .attr("stroke-linecap", "round")
          .attr("stroke-width", 1.5)
          .attr("d", line);
        var average = d3.sum(data, function(d) { return Math.abs(d.Change); }) / data.length;
        var line = d3.line()
          .x(function(d, i) { return xScale(i); })
          .y(function(d, i) { return yScale(average); });
        group.append("path")
          .datum(data)
          .attr("fill", "none")
          .attr("stroke", "steelblue")
          .attr("stroke-linejoin", "round")
          .attr("stroke-linecap", "round")
          .attr("stroke-width", 1.5)
          .attr("d", line);
        group.append("text")
          .attr("fill", "#000000")
          .attr("font-size", "24px")
          .attr("transform", "translate(" + [width / 2, -20] + ")")
          .attr("text-anchor", "middle")
          .text("Absolute Party MMR Change Over Time");

        // ROLES
        var partyRoles = d3.select("#party-roles");
        var width = +partyRoles.attr("width");
        var height = +partyRoles.attr("height");
        var radius = Math.min(width, height) / 2;
        var group = partyRoles.append("g")
          .attr("transform", "translate(" + [width / 2 - padding.r - padding.l, height / 2] + ")");
        var roles = d3.nest()
          .key(function(d) {
            return d.Role;
          })
          .entries(data);
        var roleNames = roles.map(function(d) {
          return d.key;
        });
        var colors = d3.scaleOrdinal(d3.schemeDark2);
        var pie = d3.pie()
          .value(function(d) { return d.values.length; });
        var line = d3.arc()
          .outerRadius(radius - 10)
          .innerRadius(0);
        var arc = group.selectAll(".arc")
          .data(pie(roles))
          .enter()
          .append("g")
          .attr("class", "arc")
          .append("path")
          .attr("d", line)
          .attr("fill", function(d) {
            return colors(d.data.key);
          });
        group.append("text")
          .attr("fill", "#000000")
          .attr("font-size", "24px")
          .attr("transform", "translate(" + [width / 2, -(height / 2.5)] + ")")
          .attr("text-anchor", "middle")
          .text("Party Roles");

        // HEROES
        var partyHeroes = d3.select("#party-heroes");
        var width = +partyHeroes.attr("width");
        var height = +partyHeroes.attr("height");
        var radius = Math.min(width, height) / 2;
        var group = partyHeroes.append("g")
          .attr("transform", "translate(" + [width / 2 - padding.r - padding.l, height / 2] + ")");
        var heroes = d3.nest()
          .key(function(d) {
            return d.Hero;
          })
          .entries(data);
        var heroNames = heroes.map(function(d) {
          return d.key;
        });
        var colors = d3.scaleOrdinal(d3.schemeDark2);
        var pie = d3.pie()
          .value(function(d) { return d.values.length; });
        var line = d3.arc()
          .outerRadius(radius - 10)
          .innerRadius(0);
        var arc = group.selectAll(".arc")
          .data(pie(heroes))
          .enter()
          .append("g")
          .attr("class", "arc")
          .append("path")
          .attr("d", line)
          .attr("fill", function(d) {
            return colors(d.data.key);
          });
        group.append("text")
          .attr("fill", "#000000")
          .attr("font-size", "24px")
          .attr("transform", "translate(" + [width / 2, -(height / 2.5)] + ")")
          .attr("text-anchor", "middle")
          .text("Party Heroes");

        // HEROES BAR
        var partyHeroesBar = d3.select("#party-heroes-bar");
        var width = +partyHeroesBar.attr("width") - padding.l - padding.r;
        var height = +partyHeroesBar.attr("height") - padding.t - padding.b;
        var group = partyHeroesBar.append("g")
          .attr("transform", "translate(" + [padding.l, padding.t] + ")");
        var xScale = d3.scaleBand()
          .domain(heroNames)
          .rangeRound([0, width])
          .padding(0.1);
        var yScale = d3.scaleLinear()
          .domain([0, d3.max(heroes, function(d) { return d.values.length; })])
          .rangeRound([height, 0]);
        group.append("g")
          .attr("transform", "translate(0, " + height + ")")
          .call(d3.axisBottom(xScale))
          .selectAll("text")
          .style("text-anchor", "start")
          .attr("y", 0)
          .attr("x", 5)
          .attr("transform", "rotate(45)");
        group.append("g")
          .call(d3.axisLeft(yScale))
          .append("text")
          .attr("fill", "#000000")
          .attr("font-size", "18px")
          .attr("transform", "translate(" + [-50, height / 2] + ") rotate(-90)")
          .text("Matches");
        group.selectAll(".bar")
          .data(heroes)
          .enter()
          .append("rect")
          .attr("class", "bar")
          .attr("x", function(d) { return xScale(d.key); })
          .attr("y", function(d) { return yScale(d.values.length); })
          .attr("width", xScale.bandwidth())
          .attr("height", function(d) { return height - yScale(d.values.length); })
          .attr("fill", function(d) {
            return colors(d.key);
          });
        group.append("text")
          .attr("fill", "#000000")
          .attr("font-size", "24px")
          .attr("transform", "translate(" + [width / 2, -20] + ")")
          .attr("text-anchor", "middle")
          .text("Party Heroes");

      });

      // SOLO
      d3.csv("data/solo.csv").then(function(data) {

        var padding = {t: 50, r: 50, b: 50, l: 80};

        // MMR OVER TIME
        var partyMMR = d3.select("#solo-mmr")
        var width = +partyMMR.attr("width") - padding.l - padding.r;
        var height = +partyMMR.attr("height") - padding.t - padding.b;
        var group = partyMMR.append("g")
          .attr("transform", "translate(" + padding.l + ", " + padding.t + ")");
        var xScale = d3.scaleLinear()
          .domain(d3.extent([0, data.length]))
          .range([0, width]);
        var xAxis = d3.axisBottom(xScale);
        group.append("g")
          .attr("transform", "translate(0, " + height + ")")
          .call(xAxis)
          .append("text")
          .attr("fill", "#000000")
          .attr("font-size", "18px")
          .attr("transform", "translate(" + [width / 2, 40] + ")")
          .text("Matches");
        var yScale = d3.scaleLinear()
          .domain([0, d3.max(data, function(d) { return d.MMR; })])
          .domain(d3.extent(data, function(d) { return d.MMR; }))
          .range([height, 0]);
        var yAxis = d3.axisLeft(yScale);
        group.append("g")
          .call(yAxis)
          .append("text")
          .attr("fill", "#000000")
          .attr("font-size", "18px")
          .attr("transform", "translate(" + [-50, height / 2] + ") rotate(-90)")
          .text("MMR");
        var line = d3.line()
          .x(function(d, i) { return xScale(i); })
          .y(function(d) { return yScale(d.MMR); });
        group.append("path")
          .datum(data)
          .attr("fill", "none")
          .attr("stroke", "steelblue")
          .attr("stroke-linejoin", "round")
          .attr("stroke-linecap", "round")
          .attr("stroke-width", 1.5)
          .attr("d", line);
        group.append("text")
          .attr("fill", "#000000")
          .attr("font-size", "24px")
          .attr("transform", "translate(" + [width / 2, -20] + ")")
          .attr("text-anchor", "middle")
          .text("Solo MMR Over Time");

        // MMR CHANGE OVER TIME
        var soloMMRChange = d3.select("#solo-mmr-change")
        var width = +soloMMRChange.attr("width") - padding.l - padding.r;
        var height = +soloMMRChange.attr("height") - padding.t - padding.b;
        var group = soloMMRChange.append("g")
          .attr("transform", "translate(" + padding.l + ", " + padding.t + ")");
        var xScale = d3.scaleLinear()
          .domain(d3.extent([0, data.length]))
          .range([0, width]);
        var yScale = d3.scaleLinear()
          .domain(d3.extent(data, function(d) { return +d.Change; }))
          .range([height, 0]);
        var xAxis = d3.axisBottom(xScale);
        group.append("g")
          .attr("transform", "translate(0, " + yScale(0) + ")")
          .call(xAxis)
          .append("text")
          .attr("fill", "#000000")
          .attr("font-size", "18px")
          .attr("transform", "translate(" + [width / 2, height / 2 + 40] + ")")
          .text("Matches");
        var yAxis = d3.axisLeft(yScale);
        group.append("g")
          .call(yAxis)
          .append("text")
          .attr("fill", "#000000")
          .attr("font-size", "18px")
          .attr("transform", "translate(" + [-50, height / 2] + ") rotate(-90)")
          .attr("text-anchor", "middle")
          .text("MMR Change");
        var line = d3.line()
          .x(function(d, i) { return xScale(i); })
          .y(function(d) { return yScale(d.Change); });
        group.append("path")
          .datum(data)
          .attr("fill", "none")
          .attr("stroke", "steelblue")
          .attr("stroke-linejoin", "round")
          .attr("stroke-linecap", "round")
          .attr("stroke-width", 1.5)
          .attr("d", line);
        group.append("text")
          .attr("fill", "#000000")
          .attr("font-size", "24px")
          .attr("transform", "translate(" + [width / 2, -20] + ")")
          .attr("text-anchor", "middle")
          .text("Solo MMR Change Over Time");

        // ABSOLUTE MMR CHANGE OVER TIME
        var soloMMRAbsChange = d3.select("#solo-mmr-absolute-change")
        var width = +soloMMRAbsChange.attr("width") - padding.l - padding.r;
        var height = +soloMMRAbsChange.attr("height") - padding.t - padding.b;
        var group = soloMMRAbsChange.append("g")
          .attr("transform", "translate(" + padding.l + ", " + padding.t + ")");
        var xScale = d3.scaleLinear()
          .domain(d3.extent([0, data.length]))
          .range([0, width]);
        var xAxis = d3.axisBottom(xScale);
        group.append("g")
          .attr("transform", "translate(0, " + height + ")")
          .call(xAxis)
          .append("text")
          .attr("fill", "#000000")
          .attr("font-size", "18px")
          .attr("transform", "translate(" + [width / 2, 40] + ")")
          .text("Matches");
        var yScale = d3.scaleLinear()
          .domain([0, d3.max(data, function(d) { return Math.abs(d.Change); })])
          .range([height, 0]);
        var yAxis = d3.axisLeft(yScale);
        group.append("g")
          .call(yAxis)
          .append("text")
          .attr("fill", "#000000")
          .attr("font-size", "18px")
          .attr("transform", "translate(" + [-50, height / 2] + ") rotate(-90)")
          .attr("text-anchor", "middle")
          .text("Absolute MMR Change");
        var line = d3.line()
          .x(function(d, i) { return xScale(i); })
          .y(function(d) { return yScale(Math.abs(d.Change)); });
        group.append("path")
          .datum(data)
          .attr("fill", "none")
          .attr("stroke", "steelblue")
          .attr("stroke-linejoin", "round")
          .attr("stroke-linecap", "round")
          .attr("stroke-width", 1.5)
          .attr("d", line);
        var average = d3.sum(data, function(d) { return Math.abs(d.Change); }) / data.length;
        var line = d3.line()
          .x(function(d, i) { return xScale(i); })
          .y(function(d, i) { return yScale(average); });
        group.append("path")
          .datum(data)
          .attr("fill", "none")
          .attr("stroke", "steelblue")
          .attr("stroke-linejoin", "round")
          .attr("stroke-linecap", "round")
          .attr("stroke-width", 1.5)
          .attr("d", line);
        group.append("text")
          .attr("fill", "#000000")
          .attr("font-size", "24px")
          .attr("transform", "translate(" + [width / 2, -20] + ")")
          .attr("text-anchor", "middle")
          .text("Absolute Solo MMR Change Over Time");

        // ROLES
        var soloRoles = d3.select("#solo-roles");
        var width = +soloRoles.attr("width");
        var height = +soloRoles.attr("height");
        var radius = Math.min(width, height) / 2;
        var group = soloRoles.append("g")
          .attr("transform", "translate(" + [width / 2 - padding.r - padding.l, height / 2] + ")");
        var roles = d3.nest()
          .key(function(d) {
            return d.Role;
          })
          .entries(data);
        var roleNames = roles.map(function(d) {
          return d.key;
        });
        var colors = d3.scaleOrdinal(d3.schemeDark2);
        var pie = d3.pie()
          .value(function(d) { return d.values.length; });
        var line = d3.arc()
          .outerRadius(radius - 10)
          .innerRadius(0);
        var arc = group.selectAll(".arc")
          .data(pie(roles))
          .enter()
          .append("g")
          .attr("class", "arc")
          .append("path")
          .attr("d", line)
          .attr("fill", function(d) {
            return colors(d.data.key);
          });
        group.append("text")
          .attr("fill", "#000000")
          .attr("font-size", "24px")
          .attr("transform", "translate(" + [width / 2, -(height / 2.5)] + ")")
          .attr("text-anchor", "middle")
          .text("Solo Roles");

        // HEROES
        var soloHeroes = d3.select("#solo-heroes");
        var width = +soloHeroes.attr("width");
        var height = +soloHeroes.attr("height");
        var radius = Math.min(width, height) / 2;
        var group = soloHeroes.append("g")
          .attr("transform", "translate(" + [width / 2 - padding.r - padding.l, height / 2] + ")");
        var heroes = d3.nest()
          .key(function(d) {
            return d.Hero;
          })
          .entries(data);
        var heroNames = heroes.map(function(d) {
          return d.key;
        });
        var colors = d3.scaleOrdinal(d3.schemeDark2);
        var pie = d3.pie()
          .value(function(d) { return d.values.length; });
        var line = d3.arc()
          .outerRadius(radius - 10)
          .innerRadius(0);
        var arc = group.selectAll(".arc")
          .data(pie(heroes))
          .enter()
          .append("g")
          .attr("class", "arc")
          .append("path")
          .attr("d", line)
          .attr("fill", function(d) {
            return colors(d.data.key);
          });
        group.append("text")
          .attr("fill", "#000000")
          .attr("font-size", "24px")
          .attr("transform", "translate(" + [width / 2, -(height / 2.5)] + ")")
          .attr("text-anchor", "middle")
          .text("Solo Heroes");

        // HEROES BAR
        var soloHeroesBar = d3.select("#solo-heroes-bar");
        var width = +soloHeroesBar.attr("width") - padding.l - padding.r;
        var height = +soloHeroesBar.attr("height") - padding.t - padding.b;
        var group = soloHeroesBar.append("g")
          .attr("transform", "translate(" + [padding.l, padding.t] + ")");
        var xScale = d3.scaleBand()
          .domain(heroNames)
          .rangeRound([0, width])
          .padding(0.1);
        var yScale = d3.scaleLinear()
          .domain([0, d3.max(heroes, function(d) { return d.values.length; })])
          .rangeRound([height, 0]);
        group.append("g")
          .attr("transform", "translate(0, " + height + ")")
          .call(d3.axisBottom(xScale))
          .selectAll("text")
          .style("text-anchor", "start")
          .attr("y", 0)
          .attr("x", 5)
          .attr("transform", "rotate(45)");
        group.append("g")
          .call(d3.axisLeft(yScale))
          .append("text")
          .attr("fill", "#000000")
          .attr("font-size", "18px")
          .attr("transform", "translate(" + [-50, height / 2] + ") rotate(-90)")
          .text("Matches");
        group.selectAll(".bar")
          .data(heroes)
          .enter()
          .append("rect")
          .attr("class", "bar")
          .attr("x", function(d) { return xScale(d.key); })
          .attr("y", function(d) { return yScale(d.values.length); })
          .attr("width", xScale.bandwidth())
          .attr("height", function(d) { return height - yScale(d.values.length); })
          .attr("fill", function(d) {
            return colors(d.key);
          });
        group.append("text")
          .attr("fill", "#000000")
          .attr("font-size", "24px")
          .attr("transform", "translate(" + [width / 2, -20] + ")")
          .attr("text-anchor", "middle")
          .text("Solo Heroes");

      });

    </script> -->

  </body>
</html>